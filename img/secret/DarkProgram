
def main():
    message = input("What Message will you encode sir? : ")
    code = thirteen(message)
    coded = encode(code)
    AppleTeeth = ''.join(map(str, coded))
    message_bytes = AppleTeeth.encode('ascii')
    base64_bytes = base64.b64encode(message_bytes)
    base64_message = base64_bytes.decode('ascii')

    print("Here's you coded message my good sir :" 
 + base64_message)


def encode(content):
    i = 0
    coded = []
    while i < len(content):
        coded.append(ord(content[i]))
        i += 1
    return coded


def thirteen(message):
    i = 0
    Apple = []
    while i < len(message):
        Apple.append(chr(ord(message[i]) + i))
        i += 1
    return Apple

main()
